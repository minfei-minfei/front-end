<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>JSON</title>
</head>
<body>
    <script>
        /*浅拷贝与深拷贝*/
        var obj1 = new  Object();
        obj1.name = "张三";
        obj1.father = {name: "张大"};
        //浅拷贝
        var obj2 = obj1;
        var obj3 = new Object();
        obj3.name = obj1.name;
        obj3.father = obj1.father;
        //深拷贝
        var obj4 = clone(obj1);
        var str = JSON.stringify(obj1);
        var obj5 = JSON.parse(str);
        //
        console.log("拷贝：");
        console.log("obj1.name="+obj1.name);
        console.log("obj2.name="+obj2.name);
        console.log("obj3.name="+obj3.name);
        console.log("obj1.father.name="+obj1.father.name);
        console.log("obj2.father.name="+obj2.father.name);
        console.log("obj3.father.name="+obj3.father.name);
        //
        obj1.name = "张小";
        obj1.father.name = "张老";
        console.log("更改：");
        console.log("obj1.name="+obj1.name);
        console.log("obj2.name="+obj2.name);
        console.log("obj3.name="+obj3.name);
        console.log("obj1.father.name="+obj1.father.name);
        console.log("obj2.father.name="+obj2.father.name);
        console.log("obj3.father.name="+obj3.father.name);
        /*深拷贝与浅拷贝的区别：
        * 深拷贝得到的是与模板一模一样的副本，但不是模板，而是另外一个实物
        * 当模板发生改变，由于副本是在改变之前拷贝的，所以副本不会发生改变
        * 浅拷贝得到的是模板的一个地址，它表示的还是模板
        * 当模板发生改变，浅拷贝得到的对象也会发生改变
        * obj2和obj3都是浅拷贝*/

        /*深拷贝的两种方式*/
        /*①递归调用*/
        function clone(obj){
            var newObj = new Object();
            for(var p in obj){
                if(typeof obj[p] == "object"){
                    newObj[p] = clone(obj[p]);
                }else{
                    newObj[p] = obj[p];
                }
            }
            return newObj;
        }
        console.log("深拷贝：");
        console.log("obj4.name="+obj4.name);
        console.log("obj4.father.name="+obj4.father.name);
        /*②JSON方法*/
        console.log("obj5.name="+obj5.name);
        console.log("obj5.father.name="+obj5.father.name);

    </script>
</body>
</html>